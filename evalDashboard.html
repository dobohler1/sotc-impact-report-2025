        .file-input-container {
            background: #fff;
            border: 2px dashed #cbd5e1;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
            transition: border-color 0.3s;
        }
        
        .file-input-container:hover {
            border-color: #3b82f6;
        }
        
        .file-input {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            width: 300px;
        }
        
        .load-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .load-button:hover {
            background: #2563eb;
        }
                
        // File input handler
        document.getElementById('csvFile').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                loadCSV(file);
            }
        });
        <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Evaluation Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8fafc;
            color: #334155;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            text-align: center;
            color: #1e293b;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            overflow: hidden;
            border: 1px solid #e2e8f0;
        }
        
        .card-header {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 20px;
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        .card-content {
            padding: 30px;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }
        
        .grid {
            display: grid;
            gap: 30px;
        }
        
        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #10b981, #047857);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .file-input-container {
            background: #fff;
            border: 2px dashed #cbd5e1;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
            transition: border-color 0.3s;
        }
        
        .file-input-container:hover {
            border-color: #3b82f6;
        }
        
        .file-input {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            width: 300px;
        }
        
        .load-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .load-button:hover {
            background: #2563eb;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.1rem;
            color: #6b7280;
        }
        
        .error {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Student Evaluation Dashboard</h1>
        

        
        <div id="loading" class="loading" style="display: none;">
            Loading and processing data...
        </div>
        
        <div id="error" class="error" style="display: none;"></div>
        
        <div id="dashboard" style="display: none;">
            <div class="stats-grid">
                <div class="stat-card">
                    <span id="totalResponses" class="stat-number">0</span>
                    <span class="stat-label">Total Responses</span>
                </div>
                <div class="stat-card">
                    <span id="enjoymentRate" class="stat-number">0%</span>
                    <span class="stat-label">Very Enjoyable</span>
                </div>
                <div class="stat-card">
                    <span id="recommendRate" class="stat-number">0%</span>
                    <span class="stat-label">Would Recommend</span>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">Program Enjoyment</div>
                <div class="card-content">
                    <div class="chart-container">
                        <canvas id="enjoymentChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">Program Effectiveness</div>
                <div class="card-content">
                    <div class="chart-container">
                        <canvas id="effectivenessChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">Learning Outcomes</div>
                <div class="card-content">
                    <div class="chart-container">
                        <canvas id="learningChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header">Would Recommend to Friend</div>
                    <div class="card-content">
                        <div class="chart-container">
                            <canvas id="recommendChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">Student Demographics</div>
                    <div class="card-content">
                        <div class="chart-container">
                            <canvas id="demographicsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let charts = {};
        
        function showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            document.getElementById('loading').style.display = 'none';
        }
        
        function hideError() {
            document.getElementById('error').style.display = 'none';
        }
        
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('dashboard').style.display = 'none';
            hideError();
        }
        
        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
        }
        
        function countResponses(data, column) {
            const counts = {};
            data.forEach(row => {
                const value = row[column];
                if (value && value.trim()) {
                    counts[value] = (counts[value] || 0) + 1;
                }
            });
            return counts;
        }
        
        function createPieChart(canvasId, data, title) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            
            if (charts[canvasId]) {
                charts[canvasId].destroy();
            }
            
            const chartData = Object.entries(data).map(([label, value]) => ({ label, value }));
            
            charts[canvasId] = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: chartData.map(d => d.label),
                    datasets: [{
                        data: chartData.map(d => d.value),
                        backgroundColor: [
                            '#16a34a', '#22c55e', '#eab308', '#f59e0b', '#dc2626', '#2563eb'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: title,
                            font: { size: 16 }
                        },
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        function createBarChart(canvasId, data, title, isStacked = false) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            
            if (charts[canvasId]) {
                charts[canvasId].destroy();
            }
            
            if (Array.isArray(data)) {
                // Simple bar chart
                charts[canvasId] = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: data.map(d => d.label),
                        datasets: [{
                            data: data.map(d => d.value),
                            backgroundColor: '#2563eb'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: title,
                                font: { size: 16 }
                            },
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            } else {
                // Stacked bar chart for learning outcomes
                const subjects = Object.keys(data);
                const outcomes = ['Much better', 'Somewhat better', 'Neutral', 'Somewhat worse', 'Much worse'];
                const colors = ['#16a34a', '#22c55e', '#eab308', '#f59e0b', '#dc2626'];
                
                const datasets = outcomes.map((outcome, index) => ({
                    label: outcome,
                    data: subjects.map(subject => data[subject][outcome] || 0),
                    backgroundColor: colors[index]
                }));
                
                charts[canvasId] = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: subjects,
                        datasets: datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: title,
                                font: { size: 16 }
                            }
                        },
                        scales: {
                            x: {
                                stacked: true
                            },
                            y: {
                                stacked: true,
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
        }
        
        function processData(data) {
            console.log('Processing', data.length, 'responses');
            console.log('Available columns:', Object.keys(data[0]));
            
            // Count responses for different metrics
            const enjoyment = countResponses(data, 'How enjoyable was the Science on the Court program?');
            const effectiveness = countResponses(data, 'How effective was the balance between classroom learning and basketball activities?');
            const recommendations = countResponses(data, 'Would you recommend this program to a friend');
            const grades = countResponses(data, 'Grade');
            const genders = countResponses(data, 'Gender');
            
            // Learning outcomes - handle both possible column name formats
            const robotics = countResponses(data, 'After this program, how much better do you understand the following? [Robotics (building and programming)]');
            const math = countResponses(data, 'After this program, how much better do you understand the following? [Math concepts (measurement, data, ratios, equations)]') || 
                         countResponses(data, 'After this program_1, how much better do you understand the following? [Math concepts (measurement, data, ratios, equations)]');
            
            // Update stats
            document.getElementById('totalResponses').textContent = data.length;
            document.getElementById('enjoymentRate').textContent = 
                Math.round((enjoyment['Very enjoyable'] || 0) / data.length * 100) + '%';
            document.getElementById('recommendRate').textContent = 
                Math.round((recommendations['Yes'] || 0) / data.length * 100) + '%';
            
            // Create charts
            createPieChart('enjoymentChart', enjoyment, 'Program Enjoyment');
            createBarChart('effectivenessChart', 
                Object.entries(effectiveness).map(([label, value]) => ({ label, value })), 
                'Program Effectiveness');
            createBarChart('learningChart', 
                { 'Robotics': robotics, 'Math': math }, 
                'Learning Outcomes by Subject', true);
            createPieChart('recommendChart', recommendations, 'Would Recommend to Friend');
            createBarChart('demographicsChart', 
                Object.entries({...grades, ...genders}).map(([label, value]) => ({ label, value })), 
                'Student Demographics');
            
            hideLoading();
        }
        
        function loadDefaultCSV() {
            showLoading();
            
            // For testing in Claude, we'll simulate the CSV data
            const testData = [
                {
                    "Grade": "6th",
                    "Gender": "Male",
                    "How enjoyable was the Science on the Court program?": "Very enjoyable",
                    "How effective was the balance between classroom learning and basketball activities?": "Very effective",
                    "After this program, how much better do you understand the following? [Robotics (building and programming)]": "Much better",
                    "After this program, how much better do you understand the following? [Math concepts (measurement, data, ratios, equations)]": "Much better",
                    "Would you recommend this program to a friend": "Yes"
                },
                {
                    "Grade": "6th",
                    "Gender": "Male", 
                    "How enjoyable was the Science on the Court program?": "Very enjoyable",
                    "How effective was the balance between classroom learning and basketball activities?": "Very effective",
                    "After this program, how much better do you understand the following? [Robotics (building and programming)]": "Much better",
                    "After this program, how much better do you understand the following? [Math concepts (measurement, data, ratios, equations)]": "Much better",
                    "Would you recommend this program to a friend": "Maybe"
                },
                {
                    "Grade": "6th",
                    "Gender": "Male",
                    "How enjoyable was the Science on the Court program?": "Somewhat enjoyable", 
                    "How effective was the balance between classroom learning and basketball activities?": "Very effective",
                    "After this program, how much better do you understand the following? [Robotics (building and programming)]": "Much better",
                    "After this program, how much better do you understand the following? [Math concepts (measurement, data, ratios, equations)]": "Somewhat better",
                    "Would you recommend this program to a friend": "Yes"
                },
                {
                    "Grade": "7th",
                    "Gender": "Female",
                    "How enjoyable was the Science on the Court program?": "Very enjoyable",
                    "How effective was the balance between classroom learning and basketball activities?": "Somewhat effective", 
                    "After this program, how much better do you understand the following? [Robotics (building and programming)]": "Much better",
                    "After this program, how much better do you understand the following? [Math concepts (measurement, data, ratios, equations)]": "Much better",
                    "Would you recommend this program to a friend": "Yes"
                },
                {
                    "Grade": "6th",
                    "Gender": "Female",
                    "How enjoyable was the Science on the Court program?": "Very enjoyable",
                    "How effective was the balance between classroom learning and basketball activities?": "Very effective",
                    "After this program, how much better do you understand the following? [Robotics (building and programming)]": "Somewhat better",
                    "After this program, how much better do you understand the following? [Math concepts (measurement, data, ratios, equations)]": "Somewhat better", 
                    "Would you recommend this program to a friend": "Yes"
                }
            ];
            
            // Add more test data to reach 31 responses
            for (let i = 5; i < 31; i++) {
                const grades = ["6th", "7th"];
                const genders = ["Male", "Female"];
                const enjoyment = ["Very enjoyable", "Very enjoyable", "Very enjoyable", "Somewhat enjoyable", "Neutral"];
                const effectiveness = ["Very effective", "Somewhat effective", "Neutral"];
                const learning = ["Much better", "Somewhat better", "Neutral"];
                const recommend = ["Yes", "Yes", "Yes", "Maybe"];
                
                testData.push({
                    "Grade": grades[Math.floor(Math.random() * grades.length)],
                    "Gender": genders[Math.floor(Math.random() * genders.length)],
                    "How enjoyable was the Science on the Court program?": enjoyment[Math.floor(Math.random() * enjoyment.length)],
                    "How effective was the balance between classroom learning and basketball activities?": effectiveness[Math.floor(Math.random() * effectiveness.length)],
                    "After this program, how much better do you understand the following? [Robotics (building and programming)]": learning[Math.floor(Math.random() * learning.length)],
                    "After this program, how much better do you understand the following? [Math concepts (measurement, data, ratios, equations)]": learning[Math.floor(Math.random() * learning.length)],
                    "Would you recommend this program to a friend": recommend[Math.floor(Math.random() * recommend.length)]
                });
            }
            
            // Process the test data directly
            processData(testData);
                    processData(results.data);
                },
                error: function(error) {
                    showError('Error parsing CSV: ' + error.message);
                }
            });
        }
        // Try to load default CSV on page load
        window.addEventListener('load', function() {
            // Small delay to let the page render first
            setTimeout(loadDefaultCSV, 100);
        });
    </script>
</body>
</html>
